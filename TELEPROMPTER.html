<!DOCTYPE html>
<html lang="pt-BR">
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<head>
  <meta charset="UTF-8">
  <title>TELEPROMPTER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      overflow: hidden;
      background: #000000;
      color: #ffffff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    #controls {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 20px;
      display: flex;
      align-items: center;
      z-index: 1000;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }

    .logo-section {
      flex: 0 0 auto;
      min-width: 60px;
      display: flex;
      align-items: center;
    }

    .controls-center {
      flex: 1;
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      align-items: center;
    }

    .controls-spacer {
      flex: 0 0 auto;
      min-width: 60px;
    }

    #logo {
      height: 60px;
      width: auto;
      cursor: pointer;
      transition: all 0.3s ease;
      filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3));
    }

    #logo:hover {
      transform: scale(1.05);
      filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4));
    }

    .control-section {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      min-width: 80px;
    }

    .control-label {
      font-size: 11px;
      font-weight: 500;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    button {
      background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #ffffff;
      padding: 12px 20px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      min-width: 80px;
    }

    button:hover {
      background: linear-gradient(145deg, #3a3a3a, #2e2e2e);
      border-color: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    button.playing {
      background: linear-gradient(145deg, #ff6b6b, #ee5a52);
      border-color: rgba(255, 107, 107, 0.3);
    }

    button.playing:hover {
      background: linear-gradient(145deg, #ff7979, #ff6b6b);
    }

    input[type="range"] {
      width: 120px;
      height: 6px;
      border-radius: 3px;
      background: #333;
      outline: none;
      appearance: none;
      cursor: pointer;
    }

    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: linear-gradient(145deg, #4ecdc4, #44a08d);
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(78, 205, 196, 0.3);
      transition: all 0.3s ease;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      box-shadow: 0 4px 15px rgba(78, 205, 196, 0.5);
    }

    input[type="range"]::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: linear-gradient(145deg, #4ecdc4, #44a08d);
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 10px rgba(78, 205, 196, 0.3);
    }

    input[type="number"] {
      width: 70px;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: #ffffff;
      font-size: 13px;
      text-align: center;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #4ecdc4;
      box-shadow: 0 0 0 2px rgba(78, 205, 196, 0.2);
    }

    select {
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: #ffffff;
      font-size: 13px;
      cursor: pointer;
      min-width: 100px;
    }

    select option {
      background: #1a1a1a;
      color: #ffffff;
      padding: 8px 12px;
    }

    select:focus {
      outline: none;
      border-color: #4ecdc4;
      box-shadow: 0 0 0 2px rgba(78, 205, 196, 0.2);
    }

    input[type="color"] {
      width: 40px;
      height: 40px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.05);
      padding: 2px;
    }

    input[type="color"]::-webkit-color-swatch-wrapper {
      padding: 0;
      border: none;
      border-radius: 6px;
      background: transparent;
    }

    input[type="color"]::-webkit-color-swatch {
      border: none;
      border-radius: 6px;
    }

    input[type="color"]::-moz-color-swatch {
      border: none;
      border-radius: 6px;
    }

    .flip-buttons {
      display: flex;
      gap: 8px;
    }

    .flip-buttons button {
      min-width: 45px;
      padding: 10px;
      font-size: 16px;
    }

    #teleprompter {
      position: absolute;
      top: 140px;
      left: 50%;
      transform: translateX(-50%);
      height: calc(100% - 140px);
      overflow-y: auto;
      padding: 40px 20px;
      text-align: center;
      width: 100%;
      max-width: 100%;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    #teleprompter::-webkit-scrollbar {
      display: none;
    }

    #teleprompterContent {
      display: block;
      transform-origin: center;
      width: 100%;
      outline: none;
      line-height: 1.5;
      font-size: 32px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      min-height: 200px;
      text-align: center;
      margin: 0 auto;
    }

    /* Remove formatação problemática de elementos colados, mas preserva bold/italic */
    #teleprompterContent * {
      color: inherit !important;
      background: transparent !important;
      background-color: transparent !important;
      border: none !important;
      border-left: none !important;
      border-right: none !important;
      border-top: none !important;
      border-bottom: none !important;
      margin: 0 !important;
      padding: 0 !important;
      box-shadow: none !important;
      text-shadow: none !important;
      display: block !important;
      width: 100% !important;
      max-width: 100% !important;
    }

    /* Garante que parágrafos ficam centralizados na div */
    #teleprompterContent p,
    #teleprompterContent div,
    #teleprompterContent span,
    #teleprompterContent blockquote,
    #teleprompterContent h1,
    #teleprompterContent h2,
    #teleprompterContent h3,
    #teleprompterContent h4,
    #teleprompterContent h5,
    #teleprompterContent h6 {
      margin: 0.5em auto !important;
      text-align: inherit !important;
      width: 100% !important;
      display: block !important;
    }

    #teleprompterContent:focus {
      border-color: rgba(78, 205, 196, 0.3);
      box-shadow: 0 0 0 2px rgba(78, 205, 196, 0.1);
    }

    .separator {
      width: 1px;
      height: 30px;
      background: rgba(255, 255, 255, 0.1);
      margin: 0 8px;
    }

    @media (max-width: 768px) {
      #controls {
        padding: 15px 10px;
      }

      .logo-section {
        min-width: 40px;
      }

      .controls-center {
        gap: 12px;
      }

      .controls-spacer {
        min-width: 40px;
      }

      .control-section {
        gap: 8px;
      }

      button {
        padding: 10px 16px;
        font-size: 13px;
        min-width: 70px;
      }

      input[type="range"] {
        width: 100px;
      }

      input[type="number"] {
        width: 60px;
      }

      #teleprompter {
        top: 160px;
        height: calc(100% - 160px);
      }

      .separator {
        display: none;
      }

      #logo {
        height: 30px;
      }
    }

    @media (max-width: 480px) {
      #controls {
        padding: 10px 5px;
      }

      .logo-section {
        min-width: 30px;
      }

      .controls-center {
        gap: 8px;
      }

      .controls-spacer {
        min-width: 30px;
      }

      .control-group {
        min-width: 60px;
      }

      button {
        padding: 8px 12px;
        font-size: 12px;
        min-width: 60px;
      }

      input[type="range"] {
        width: 80px;
      }

      input[type="number"] {
        width: 50px;
        padding: 6px 8px;
      }

      select {
        min-width: 80px;
        padding: 6px 8px;
      }

      .control-label {
        font-size: 10px;
      }

      #logo {
        height: 25px;
      }
    }
  </style>
</head>
<body>
  <div id="controls">
    <div class="logo-section">
      <img id="logo" src="logo.svg" alt="Logo">
    </div>

    <div class="controls-center">
      <div class="control-section">
        <div class="control-group">
          <div class="control-label">Controles</div>
          <div style="display: flex; gap: 8px;">
            <button id="playPause">Play</button>
            <button id="reset">Início</button>
          </div>
        </div>
      </div>

      <div class="separator"></div>

      <div class="control-section">
        <div class="control-group">
          <div class="control-label">Velocidade</div>
          <input type="range" id="speedRange" min="0" max="10" step="0.1" value="2">
          <input type="number" id="speedNumber" min="0" max="10" step="0.1" value="2">
        </div>
      </div>

      <div class="separator"></div>

      <div class="control-section">
        <div class="control-group">
          <div class="control-label">Espelhamento</div>
          <div class="flip-buttons">
            <button id="flipH" title="Espelhar Horizontal">↔️</button>
            <button id="flipV" title="Espelhar Vertical">↕️</button>
          </div>
        </div>
      </div>

      <div class="separator"></div>

      <div class="control-section">
        <div class="control-group">
          <div class="control-label">Fonte</div>
          <select id="fontSelect">
            <option value="Arial">Arial</option>
            <option value="Verdana">Verdana</option>
            <option value="Courier New">Courier New</option>
            <option value="Georgia">Georgia</option>
            <option value="Times New Roman">Times New Roman</option>
          </select>
        </div>

        <div class="control-group">
          <div class="control-label">Tamanho</div>
          <input type="range" id="fontSizeControl" min="10" max="150" step="1" value="32">
        </div>
      </div>

      <div class="separator"></div>

      <div class="control-section">
        <div class="control-group">
          <div class="control-label">Cores</div>
          <div style="display: flex; gap: 8px; align-items: center;">
            <input type="color" id="textColor" value="#ffffff" title="Cor do texto">
            <input type="color" id="bgColor" value="#000000" title="Cor de fundo">
          </div>
        </div>
      </div>

      <div class="separator"></div>

      <div class="control-section">
        <div class="control-group">
          <div class="control-label">Layout</div>
          <input type="range" id="widthControl" min="30" max="100" value="40" title="Largura">
        </div>

        <div class="control-group">
          <div class="control-label">Espaçamento</div>
          <input type="range" id="lineHeightControl" min="0.5" max="3" step="0.1" value="1.5" title="Altura da linha">
        </div>

        <div class="control-group">
          <div class="control-label">Alinhamento</div>
          <select id="textAlign">
            <option value="left">Esquerda</option>
            <option value="center" selected>Centro</option>
            <option value="right">Direita</option>
          </select>
        </div>
      </div>
    </div>

    <div class="controls-spacer"></div>
  </div>

  <div id="teleprompter">
    <div id="teleprompterContent" contenteditable="true">
      Cole ou digite seu texto aqui...
    </div>
  </div>

  <script>
    const teleprompter = document.getElementById('teleprompter');
    const teleprompterContent = document.getElementById('teleprompterContent');
    const playPauseBtn = document.getElementById('playPause');
    const resetBtn = document.getElementById('reset');
    const speedRange = document.getElementById('speedRange');
    const speedNumber = document.getElementById('speedNumber');
    const flipHBtn = document.getElementById('flipH');
    const flipVBtn = document.getElementById('flipV');
    const fontSelect = document.getElementById('fontSelect');
    const fontSizeControl = document.getElementById('fontSizeControl');
    const textColor = document.getElementById('textColor');
    const bgColor = document.getElementById('bgColor');
    const widthControl = document.getElementById('widthControl');
    const lineHeightControl = document.getElementById('lineHeightControl');
    const textAlign = document.getElementById('textAlign');

    let isPlaying = false;
    let speed = parseFloat(speedRange.value);
    let scrollInterval;
    let flipH = false;
    let flipV = false;
    let pixelAccumulator = 0;

    function updateSpeed(value) {
      speed = parseFloat(value);
      speedRange.value = speed;
      speedNumber.value = speed;
    }

    function startScrolling() {
      if (scrollInterval) clearInterval(scrollInterval);
      pixelAccumulator = 0;
      
      scrollInterval = setInterval(() => {
        if (speed === 0) return; // Parado
        
        // Acumula pixels fracionários para movimento suave
        pixelAccumulator += speed * 0.1; // Converte escala 0-10 para movimento em pixels
        
        // Quando acumula pelo menos 1 pixel, move
        if (pixelAccumulator >= 1) {
          const pixelsToMove = Math.floor(pixelAccumulator);
          teleprompter.scrollTop += pixelsToMove;
          pixelAccumulator -= pixelsToMove; // Mantém a parte fracionária
        }
      }, 16);
    }

    function stopScrolling() {
      if (scrollInterval) clearInterval(scrollInterval);
    }

    function updateTransform() {
      const flipScale = `scale(${flipH ? -1 : 1}, ${flipV ? -1 : 1})`;
      teleprompterContent.style.transform = flipScale;
    }

    function cleanPastedContent() {
  setTimeout(() => {
    const allElements = teleprompterContent.querySelectorAll('*');
    allElements.forEach(el => {
      const computed = window.getComputedStyle(el);

      const isBold = computed.fontWeight === 'bold' || parseInt(computed.fontWeight) >= 600 || el.tagName === 'B' || el.tagName === 'STRONG';
      const isItalic = computed.fontStyle === 'italic' || el.tagName === 'I' || el.tagName === 'EM';
      const isUnderline = computed.textDecoration.includes('underline') || el.tagName === 'U';
      const isStrikethrough = computed.textDecoration.includes('line-through') || el.tagName === 'S' || el.tagName === 'STRIKE' || el.tagName === 'DEL';

      el.removeAttribute('style');
      el.removeAttribute('class');
      el.removeAttribute('id');

      const badAttributes = ['bgcolor', 'color', 'face', 'size', 'align', 'valign', 'background'];
      badAttributes.forEach(attr => el.removeAttribute(attr));

      if (isBold) el.style.fontWeight = 'bold';
      if (isItalic) el.style.fontStyle = 'italic';
      if (isUnderline) el.style.textDecoration = 'underline';
      if (isStrikethrough) el.style.textDecoration = el.style.textDecoration
        ? el.style.textDecoration + ' line-through'
        : 'line-through';
    });

    teleprompterContent.style.textAlign = textAlign.value;
  }, 10);
}

    playPauseBtn.onclick = () => {
      isPlaying = !isPlaying;
      playPauseBtn.textContent = isPlaying ? 'Pause' : 'Play';
      playPauseBtn.classList.toggle('playing', isPlaying);
      isPlaying ? startScrolling() : stopScrolling();
    };

    resetBtn.onclick = () => {
      teleprompter.scrollTop = 0;
    };

    speedRange.oninput = (e) => updateSpeed(e.target.value);
    speedNumber.oninput = (e) => updateSpeed(e.target.value);

    flipHBtn.onclick = () => {
      flipH = !flipH;
      flipHBtn.style.background = flipH ? 
        'linear-gradient(145deg, #4ecdc4, #44a08d)' : 
        'linear-gradient(145deg, #2a2a2a, #1e1e1e)';
      updateTransform();
    };

    flipVBtn.onclick = () => {
      flipV = !flipV;
      flipVBtn.style.background = flipV ? 
        'linear-gradient(145deg, #4ecdc4, #44a08d)' : 
        'linear-gradient(145deg, #2a2a2a, #1e1e1e)';
      updateTransform();
    };

    fontSelect.onchange = () => {
      teleprompterContent.style.fontFamily = fontSelect.value;
    };

    fontSizeControl.oninput = () => {
      teleprompterContent.style.fontSize = fontSizeControl.value + 'px';
    };

    textColor.oninput = () => {
      teleprompterContent.style.color = textColor.value;
    };

    bgColor.oninput = () => {
      document.body.style.backgroundColor = bgColor.value;
    };

    widthControl.oninput = () => {
      teleprompterContent.style.width = widthControl.value + '%';
    };

    lineHeightControl.oninput = () => {
      teleprompterContent.style.lineHeight = lineHeightControl.value;
    };

    textAlign.onchange = () => {
      teleprompterContent.style.textAlign = textAlign.value;
    };

    // Intercepta eventos de paste para limpar formatação
    teleprompterContent.addEventListener('paste', (e) => {
      // Permite o paste normal, mas limpa depois
      cleanPastedContent();
    });

    // Remove o evento de input que estava limpando durante digitação
    // teleprompterContent.addEventListener('input', () => {
    //   cleanPastedContent();
    // });

    // Inicializar cor de fundo
document.body.style.backgroundColor = bgColor.value;

// Inicializar largura padrão
teleprompterContent.style.width = widthControl.value + '%';

// Atualização dinâmica ao mover o controle
widthControl.oninput = () => {
  teleprompterContent.style.width = widthControl.value + '%';
};

    // Atalhos de teclado com verificação de foco
document.addEventListener('keydown', (e) => {
  const tag = document.activeElement.tagName.toLowerCase();
  const isEditable = document.activeElement.isContentEditable;
  const isTextInput = tag === 'input' || tag === 'textarea' || isEditable;

  if (isTextInput) return; // Ignora atalhos se estiver digitando

  if (e.key === '+') {
    updateSpeed(Math.min(speed + 0.1, 10).toFixed(1));
  } else if (e.key === '-') {
    updateSpeed(Math.max(speed - 0.1, 0).toFixed(1));
  } else if (e.code === 'Space') {
    e.preventDefault(); // evita scroll da página
    playPauseBtn.click();
  } else if (e.key.toLowerCase() === 'h') {
    flipHBtn.click(); // atalho para espelhar horizontal
  } else if (e.key.toLowerCase() === 'v') {
    flipVBtn.click(); // atalho para espelhar vertical
  } else if (e.key === 'Home') {
    resetBtn.click();
  }
});

    // Controle por scroll no mouse sobre os sliders
    document.querySelectorAll('input[type="range"]').forEach(slider => {
      slider.addEventListener('wheel', (e) => {
        e.preventDefault();
        const step = parseFloat(slider.step) || 0.1;
        const direction = e.deltaY < 0 ? 1 : -1;
        const newValue = parseFloat(slider.value) + step * direction;
        slider.value = Math.max(slider.min, Math.min(slider.max, newValue));
        slider.dispatchEvent(new Event('input'));
      });
    });
  </script>
</body>
</html>